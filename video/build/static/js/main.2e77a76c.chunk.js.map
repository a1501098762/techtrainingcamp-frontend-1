{"version":3,"sources":["VideoFooter.js","component/LikeButton.js","VideoSidebar.js","component/MusicRecord.js","Video.js","TabBar.js","NavBar.js","App.js","index.js"],"names":["VideoFooter","author","description","tagList","bgm","className","src","scrollamount","LikeButton","defaultOptions","loop","autoplay","animationData","AnimationData","rendererSettings","preserveAspectRatio","options","height","width","VideoSidebar","id","icon","likes","shares","comments","useState","liked","setLiked","num2string","n","String","Math","floor","onClick","data","console","log","axios","post","then","response","HeartFilled","MessageFilled","ShareAltOutlined","MusicRecord","props","playing","LottieAnimationData","isPaused","Video","videoRef","useRef","url","setPlaying","onVideoPress","current","pause","play","style","autoPlay","ref","display","length","join","createTag","TabBar","index","setIndex","PlusOutlined","NavBar","SearchOutlined","App","videos","setVideos","useEffect","get","code","map","_id","key","overflow","document","body","clientHeight","showVideo","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2e77a76c.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./VideoFooter.scss\";\n\n// 左下侧信息栏:作者 描述 背景音乐\nfunction VideoFooter({ author, description, tagList, bgm }) {\n  return (\n    <div className=\"videoFooter\">\n      <div className=\"videoFooter-text\">\n        <p className=\"channel\"> @{author} </p>\n        <p className=\"description\">{description}<strong>{tagList}</strong></p>\n        <div className=\"ticker\">\n          <img src=\"/note.png\" className=\"ticker-note\"></img>\n          <marquee scrollamount=\"3\">{bgm}</marquee>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default VideoFooter;\n","// 点赞动效\r\nimport React from 'react'\r\nimport Lottie from 'react-lottie'\r\n\r\nimport AnimationData from './8041-like-button.json'\r\n\r\nconst LikeButton = () => {\r\n  // 配置动效的渲染选项\r\n  const defaultOptions = {\r\n    loop: false,\r\n    autoplay: true,\r\n    animationData: AnimationData,\r\n    rendererSettings: {\r\n      preserveAspectRatio: 'xMidYMid slice'\r\n    }\r\n  }\r\n  return (\r\n      <Lottie className=\"lottie\"\r\n        options={defaultOptions}\r\n        height={42.4}\r\n        width={50}\r\n      ></Lottie>\r\n  )\r\n}\r\n\r\nexport default LikeButton;","import React, {useState} from \"react\";\nimport \"./VideoSidebar.scss\"\nimport { HeartFilled, MessageFilled, ShareAltOutlined } from '@ant-design/icons'\nimport LikeButton from \"./component/LikeButton\"\nimport axios from 'axios'\n\n// 右侧工具栏：点赞 评论 转发\nfunction VideoSidebar({ id, icon, likes, shares, comments}) {\n  const [liked, setLiked] = useState(false);\n\n  // 评论数超过一万\n  function num2string(n) {\n    if (n > 9999)\n      return String(Math.floor( n / 10000)) + 'w';\n    return String(n)\n  }\n\n  // 点击小心心,切换动效并向后端发送数据\n  function handleClick() {\n    setLiked(!liked);\n    var data;\n    if (liked)\n      data = {\"id\":id,\"isLike\":false};\n    else\n      data = {\"id\":id,\"isLike\":true};\n    console.log(data);\n    axios.post(\"https://qck2s3.fn.thelarkcloud.com/likeVideo\", data)\n    .then((response)=>{\n      console.log('res=>', response);\n    })\n  }\n\n  return (\n    <div className=\"videoSidebar\">\n      <div className=\"videoSidebar-button\">\n        <div className=\"profile\"><img src={icon} /></div>\n      </div>\n      <div className=\"videoSidebar-button\" onClick={handleClick}>\n        {liked ? (\n          <LikeButton />\n        ) : (\n          <HeartFilled/>\n        )}\n        <p>{liked ? num2string(likes + 1) : num2string(likes)}</p>\n      </div>\n      <div className=\"videoSidebar-button\">\n          <MessageFilled/>\n          <p>{comments}</p>\n      </div>\n      <div className=\"videoSidebar-button\">\n        <ShareAltOutlined/>\n        <p>{num2string(shares)}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default VideoSidebar;","// CD旋转动效\r\nimport React from 'react'\r\nimport Lottie from 'react-lottie'\r\nimport LottieAnimationData from './animation-cd.json'\r\n\r\nconst MusicRecord = (props) => {\r\n  // 配置动效的渲染选项\r\n  const defaultOptions = {\r\n    loop: true,\r\n    autoplay: props.playing,\r\n    animationData: LottieAnimationData,\r\n    rendererSettings: {\r\n      preserveAspectRatio: 'xMidYMid slice'\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <Lottie className=\"lottie\"\r\n        options={defaultOptions}\r\n        height={100}\r\n        width={100}\r\n        isPaused={!props.playing}\r\n      ></Lottie>\r\n    </div>\r\n      \r\n  )\r\n}\r\n\r\nexport default MusicRecord;","import React, { useRef, useState } from \"react\";\nimport VideoFooter from \"./VideoFooter\";\nimport VideoSidebar from \"./VideoSidebar\";\nimport \"./Video.scss\";\nimport MusicRecord from \"./component/MusicRecord\";\n// import Xgplayer from 'xgplayer-react';\n\n// 视频播放组件,底部信息,侧边点赞评论转发\n// 视频暂停时,CD暂停旋转\nfunction Video (props) {\n  let videoRef = useRef(null);\n  let{ id, url, height, author, description, tagList, icon, likes, comments, shares, bgm } = props\n  const [playing, setPlaying] = useState(true);\n  \n  // 点击视频,在播放与暂停之间切换\n  const onVideoPress = () => {\n    if (playing) {\n      videoRef.current.pause();\n      setPlaying(false);\n    } else {\n      videoRef.current.play();\n      setPlaying(true);\n    }\n  };\n  \n  // 生成 #tag #tag\n  function createTag(tagList){\n    if(tagList.length === 0)\n      return \"\"\n    return \" #\" + tagList.join(' #')\n  }\n\n  return (\n    <div style={height={height}} className=\"Video\">\n      <video\n        className=\"video-player\"\n        autoPlay\n        // muted\n        loop\n        onClick={onVideoPress}\n        ref={videoRef}\n        src={url}\n      />\n      <div className=\"video-pause\" \n        style={{display:playing ? \"none\" : \"block\"}}\n        onClick={onVideoPress}\n      >\n        <img className=\"pause-icon\" src=\"/pause.png\" />\n      </div>\n      <VideoFooter\n        author={author} description={description} tagList={createTag(tagList)}\n        bgm={bgm}\n      />\n      <VideoSidebar id={id} icon={icon} likes={likes} comments={comments} shares={shares}/>\n      <div className=\"music-record\">\n        <MusicRecord playing={playing}/>\n      </div>\n    </div>\n  );\n}\n\nexport default Video;\n","import React, { useState } from 'react';\r\nimport \"./TabBar.scss\";\r\nimport { PlusOutlined } from '@ant-design/icons'\r\n\r\n// 底部导航栏\r\nfunction TabBar() {\r\n  const [index, setIndex] = useState(0);\r\n\r\n\r\n  return (\r\n    <div className=\"TabBar\">\r\n      <div className=\"tabBarOptions\">\r\n        <a className={index===0 ?\"checked\":\"\"} onClick={()=>setIndex(0)}>首页</a>\r\n        <a className={index===1 ?\"checked\":\"\"} onClick={()=>setIndex(1)}>朋友</a>\r\n        <a className=\"upLoad\"><div className=\"uploadInner\"><PlusOutlined/></div></a>\r\n        <a className={index===3 ?\"checked\":\"\"} onClick={()=>setIndex(3)}>消息</a>\r\n        <a className={index===4 ?\"checked\":\"\"} onClick={()=>setIndex(4)}>我</a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TabBar;","import React, { useState } from 'react';\r\nimport \"./NavBar.scss\";\r\nimport { SearchOutlined } from '@ant-design/icons'\r\n\r\n// 顶部导航栏\r\nfunction NavBar() {\r\n  const [index, setIndex] = useState(3);\r\n\r\n\r\n  return (\r\n    <div className=\"NavBar\">\r\n      <div className=\"navBarOptions\">\r\n        <a>直播</a>\r\n        <a className={index===1 ?\"checked\":\"\"} onClick={()=>setIndex(1)}>同城</a>\r\n        <a className={index===2 ?\"checked\":\"\"} onClick={()=>setIndex(2)}>关注</a>\r\n        <a className={index===3 ?\"checked\":\"\"} onClick={()=>setIndex(3)}>推荐</a>\r\n        <a className=\"searchButton\"><SearchOutlined/></a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NavBar;","import React, { useState, useEffect } from \"react\";\nimport LazyLoad from 'react-lazyload';\nimport \"./App.scss\";\nimport axios from 'axios'\n\nimport Video from \"./Video\";\nimport TabBar from \"./TabBar\"\nimport NavBar from \"./NavBar\"\n\nfunction App() {\n  const [videos, setVideos] = useState([]);\n\n  // 获取播放列表\n  // useEffect(()=> {\n  //   axios.get(\"https://qck2s3.fn.thelarkcloud.com/getVideoList\").then((response) => {\n  //     const videos = response.data;\n  //     console.log(videos);\n  //     setVideos(videos);\n  //   });\n  // },[]);\n\n  useEffect(() => {\n      axios.get(\"/video.json\").then((response) => {\n        const videos = response.data;\n        if (videos.code === 0) {\n          setVideos(videos.data)\n        }\n      });\n    },[]);\n\n  // 创建视频播放组件\n  // 懒加载,组件距离视窗100px时开始加载\n  // 单个视频组件高度等于body高度+1\n  function showVideo(videos) {\n    return videos.map(\n      ({ _id, url, author, description, tagList, icon, likes, comments, shares, bgm}) => {\n        return (\n          <LazyLoad key={url} overflow={true} height={document.body.clientHeight+1}>\n            <Video\n              id = {_id}\n              url={url}\n              height={document.body.clientHeight+1}\n              author={author}\n              description={description}\n              tagList={tagList}\n              icon={icon}\n              likes={likes}\n              comments={comments}\n              shares={shares}\n              bgm={bgm} \n            />\n           </LazyLoad>\n        );\n      }\n    )\n  }\n\n  return (\n    // BEM\n    <div className=\"app\">\n      <div className=\"app-videos\">\n        {showVideo(videos)}\n      </div>\n      <NavBar />\n      <TabBar />\n    </div>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import * as serviceWorker from './serviceWorker';\nimport './index.scss';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// serviceWorker.unregister();\n\n"],"sourceRoot":""}